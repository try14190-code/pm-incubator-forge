
--- strategy/config/PM-EDDI-1.yaml ---

feature_id: PM-EDDI-0
title: "환경 변수 로딩을 위한 config/env 초기화"

domain: config

success_criteria:
  - 애플리케이션 시작 시 `.env` 파일이 1회 로드된다.
  - 환경 변수 로딩 책임은 config 패키지에 명시적으로 위치한다.
  - Service 및 Controller에서는 `.env` 파일을 직접 로드하지 않는다.
  - 환경 변수 로딩 여부는 애플리케이션 전역에서 일관되게 보장된다.

todos:
  - python-dotenv 의존성 추가
  - config/env.py 생성 및 load_env 함수 구현
  - 애플리케이션 엔트리포인트에서 load_env 호출
--- strategy/kakao_authentication/PM-EDDI-2.yaml ---

feature_id: PM-EDDI-2
title: "사용자가 Kakao 인증 요청 시 인증 URL 생성"

domain: kakao_authentication

success_criteria:
  - 사용자는 Kakao 인증 요청 시 인증 URL을 정상적으로 받을 수 있다.
  - 생성된 URL은 Kakao OAuth 기준에 맞게 client_id, redirect_uri, response_type 등 필수 파라미터를 포함한다.
  - URL은 한 번 요청 시 즉시 반환되어, 사용자가 해당 URL을 통해 Kakao 인증 페이지로 이동할 수 있다.
  - 잘못된 요청(누락된 필수 파라미터 등)에 대해 적절한 예외 처리 및 메시지를 반환한다.
  - Kakao OAuth 인증 URL 생성 API는 `GET /kakao-authentication/request-oauth-link` 로 제공된다.
  - 인증 URL 생성 로직은 Layered Architecture를 따르며 Controller는 Service Interface에만 의존한다.
  - Service Interface와 구현체는 명시적으로 분리되며, Controller는 구현체에 직접 의존하지 않는다.
  - Kakao OAuth 관련 설정값(client_id, redirect_uri)은 환경 변수(.env) 기반으로 로드되며 코드에 하드코딩되지 않는다.
  - Controller는 환경 변수, 기본값 결정, 인증 URL 구성 로직을 직접 다루지 않으며 요청 전달 및 응답 반환 역할만 수행한다.

todos:
  - Kakao OAuth 인증 URL 생성 API 구현 (`GET /kakao-authentication/request-oauth-link`)
  - 필수 파라미터(client_id, redirect_uri, response_type) 검증
  - URL 생성 로직 구현
  - 생성된 URL 반환 처리
  - 예외 처리 (파라미터 누락, 잘못된 요청 등)

--- strategy/kakao_authentication/PM-EDDI-3.yaml ---

feature_id: PM-EDDI-3
title: "인가 코드(code)를 받아 Kakao 액세스 토큰 요청"

domain: kakao_authentication

success_criteria:
  - 사용자는 Kakao 인증 후 발급된 인가 코드(code)를 통해 액세스 토큰을 정상적으로 발급받을 수 있다.
  - 액세스 토큰 발급 시 Kakao OAuth 기준(client_id, redirect_uri, code, grant_type 등)에 맞춰 요청이 처리된다.
  - 발급된 액세스 토큰은 바로 API 요청에 사용 가능하며, 토큰 만료 시간 및 리프레시 토큰도 포함된다.
  - 잘못된 인가 코드나 파라미터 누락 시 적절한 오류 메시지를 반환한다.
  - 인증 URL 생성 로직은 Layered Architecture를 따르며 Controller는 Service Interface에만 의존한다.
  - Service Interface와 구현체는 명시적으로 분리되며, Controller는 구현체에 직접 의존하지 않는다.
  - Kakao OAuth 관련 설정값(client_id, redirect_uri)은 환경 변수(.env) 기반으로 로드되며 코드에 하드코딩되지 않는다.
  - Controller는 환경 변수, 기본값 결정, 인증 URL 구성 로직을 직접 다루지 않으며 요청 전달 및 응답 반환 역할만 수행한다.

todos:
  - `GET /kakao-authentication/request-access-token-after-redirection` API 구현 및 필수 파라미터 검증
  - Service Interface 설계 및 구현체 작성
  - Kakao 토큰 서버로 요청 로직 구현
  - 발급된 액세스 토큰 및 리프레시 토큰 반환 처리
  - 예외 처리 (잘못된 코드, 파라미터 누락 등)

--- strategy/kakao_authentication/PM-EDDI-4.yaml ---

feature_id: PM-EDDI-4
title: "발급 받은 액세스 토큰으로 Kakao 사용자 정보 조회"

domain: kakao_authentication

success_criteria:
  - 사용자는 PM-EDDI-3에서 발급받은 Kakao 액세스 토큰을 통해 자신의 Kakao 계정 정보를 조회할 수 있다.
  - 조회 가능한 정보에는 사용자 ID, 닉네임, 이메일(동의 시) 등이 포함된다.
  - 액세스 토큰이 유효하지 않거나 만료된 경우, 적절한 오류 메시지가 반환된다.
  - PM-EDDI-3 Service 로직 내에서 호출되어, 발급된 액세스 토큰과 함께 사용자 정보를 반환하도록 연동된다.
  - 조회된 사용자 정보는 Service 로직에서 바로 활용 가능하다.
  - 사용자 정보 조회 로직은 Layered Architecture를 준수하며, Controller는 Service 인터페이스만 호출한다.

todos:
  - 액세스 토큰 유효성 검증
  - Kakao API 요청 로직 구현
  - 응답 데이터 파싱 및 모델 매핑
  - 예외 처리 (유효하지 않은 토큰, API 오류 등)
  - 반환 값 정의 및 문서화 (PM-EDDI-3 토큰 발급 결과와 통합)
